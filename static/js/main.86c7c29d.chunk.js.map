{"version":3,"sources":["index.js"],"names":["ECA","props","state","rule","ruleMap","Array","history","view","iteration","viewIter","nRow","nCell","seed","fill","Math","floor","i","push","forward","bind","rewind","steps","this","currState","length","nextState","slice","hood","ruleIndex","concat","setState","newRule","parseInt","newHist","newView","j","nRows","buttonsIndex","min","className","Grid","onClick","changeSquare","RuleForm","onSubmit","ruleChange","Button","label","JumpToStart","JumpToEnd","reset","React","Component","rows","cols","gridList","rowList","ButtonSquare","key","toString","alive","Square","renderSquares","color","style","value","handleChange","handleSubmit","event","target","preventDefault","type","width","onChange","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.86c7c29d.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\n\nclass ECA extends React.Component {\n\tconstructor(props) {\n    super(props);\n    this.state = {\n      rule: 126,\n      ruleMap: Array(8),\n      history: [],\n      view: [],\n      iteration: 1,\n      viewIter: 1,\n      nRow: 40,\n      nCell: 80\n    };\n\n    let nRow = this.state.nRow;\n    let nCell = this.state.nCell;\n\n    // create initial state \n    const seed = Array(nCell).fill(0);\n    seed[Math.floor(nCell / 2)] = 1;\n\n    // add to history\n    this.state.history[0] = seed;\n\n    // create view array\n    this.state.view[0] = seed;\n    for (let i=1; i<nRow; i++) {\n      this.state.view.push(Array(nCell).fill(0));\n    }\n\n    // create ruleMap\n    for (let i=0; i<8; i++) {\n      this.state.ruleMap[i] = Math.floor(this.state.rule / 2**i) % 2;\n    }\n\n    this.forward = this.forward.bind(this);\n    this.rewind = this.rewind.bind(this);\n  }\n\n  forward(steps=1) {\n    let iteration = this.state.iteration;\n    let viewIter = this.state.viewIter;\n    let history = this.state.history;\n    let view = this.state.view;\n    const nRow = this.state.nRow;\n    let currState = history[history.length-1];\n    let nextState = currState.slice();\n\n    for (let i=0; i<steps; i++) {\n      // if viewIter == iteration, calcNext\n      // else, update viewIter and view\n      if (viewIter == iteration) {\n        // calculate the next state \n        for (let i=0; i<currState.length; i++) {\n          let hood = [];\n\n          // left \n          if (i === 0) {\n            hood[0] = currState[currState.length-1];\n          } else {\n            hood[0] = currState[i-1];\n          }\n          // center\n          hood[1] = currState[i];\n          // right\n          if (i === currState.length-1) {\n            hood[2] = currState[0];\n          } else {\n            hood[2] = currState[i+1];\n          }\n\n          // calculate nextState[i]\n          // hood -> [binary to dec] -> ruleIndex -> [ruleMap] -> nextState[i]\n          let ruleIndex = hood[0]; \n          ruleIndex += hood[1]*2;\n          ruleIndex += hood[2]*4;\n          nextState[i] = this.state.ruleMap[ruleIndex];\n        }\n\n        // update local vars\n        if (iteration < nRow) {\n          view[iteration] = nextState;\n        } else {\n          view = view.slice(1).concat([nextState]);\n        }\n        history = history.concat([nextState]);\n        currState = history[history.length-1];\n        nextState = currState.slice();\n\n        iteration += 1;\n        viewIter += 1;\n      } else {\n        viewIter += 1;\n        view = history.slice(viewIter - nRow, viewIter);\n      }\n    }\n\n    this.setState({\n      view: view,\n      history: history,\n      viewIter: viewIter,\n      iteration: iteration\n    });\n  }\n\n  rewind(steps=1) {\n    let viewIter = this.state.viewIter;\n    let history = this.state.history;\n    let view = this.state.view;\n    const nRow = this.state.nRow;\n\n    for (let i=0; i<steps; i++) {\n      if (viewIter > nRow) {\n        viewIter -= 1;\n        view = history.slice(viewIter - nRow, viewIter);\n      }\n    }\n\n    this.setState({\n      view: view,\n      viewIter: viewIter\n    });\n  }\n\n  JumpToStart() {\n    let history = this.state.history;\n    const nRow = this.state.nRow;\n    const viewIter = this.state.viewIter;\n\n    if (viewIter > nRow) {\n      this.setState({\n        view: history.slice(0, nRow),\n        viewIter: nRow\n      });\n    }\n  }\n\n  JumpToEnd() {\n    let history = this.state.history;\n    const nRow = this.state.nRow;\n    const viewIter = this.state.viewIter;\n\n    if (viewIter >= nRow) {\n      this.setState({\n        view: history.slice(history.length-nRow, history.length),\n        viewIter: history.length\n      });\n    }\n  }\n\n  ruleChange(newRule) {\n    let ruleMap = this.state.ruleMap;\n    \n    // update ruleMap\n      for (let i=0; i<8; i++) {\n        ruleMap[i] = Math.floor(newRule / 2**i) % 2;\n      }\n    this.setState({\n      rule: parseInt(newRule),\n      ruleMap: ruleMap\n    });\n  }\n\n  reset() {\n    const history = this.state.history;\n    const nRow = this.state.nRow;\n    const nCell = this.state.nCell;\n\n    let newHist = history.slice(0, 1);\n    let newView = history.slice(0, 1);\n    for (let i=1; i<nRow; i++) {\n      newView[i] = Array(nCell).fill(0);\n    }\n\n    this.setState({\n      history: newHist,\n      iteration: 1,\n      viewIter: 1,\n      view: newView\n    });\n  }\n\n  changeSquare(j) {\n    const viewIter = this.state.viewIter;\n    const nRows = this.state.nRows;\n    let view = this.state.view;\n    let history = this.state.history;\n    let currState = history[history.length-1];\n\n\n    // change the jth button in the row at i == buttonsIndex\n    let buttonsIndex = Math.min(this.state.viewIter-1, this.state.nRows-1);\n    // modify history and view\n    currState[j] = 1 ^ currState[j];\n\n    view[buttonsIndex] = currState;\n    history[history.length-1] = currState;\n\n    this.setState({\n      history: history,\n      view: view\n    });\n  }\n\n\n\n  render() {\n    return (\n      <div className=\"content-wrapper\">\n        <div className=\"grid\">\n          <Grid\n            view={this.state.view}         \n            viewIter={this.state.viewIter}\n            iteration={this.state.iteration}\n            onClick={(j) => this.changeSquare(j)}\n          />\n        </div>\n        <div className=\"button-wrapper clearfix\">\n          <div className=\"formContainer\">\n            <RuleForm\n              onSubmit={(newRule) => this.ruleChange(newRule)}\n            />\n          </div>\n          <Button \n            className=\"controlButton\"\n            label=\"Next\"\n            onClick={() => this.forward()}\n          />\n          <Button\n            className=\"controlButton\"\n            label=\"Back\"\n            onClick={() => this.rewind()}\n          />\n          <Button\n            className=\"controlButton\"\n            label=\"Next 10\"\n            onClick={() => this.forward(10)}\n          />\n          <Button\n            className=\"controlButton\"\n            label=\"Back 10\"\n            onClick={() => this.rewind(10)}\n          />\n          <Button\n            className=\"controlButton\"\n            label=\"Jump to start\"\n            onClick={() => this.JumpToStart()}\n          />\n          <Button\n            className=\"controlButton\"\n            label=\"Jump to end\"\n            onClick={() => this.JumpToEnd()}\n          />\n          <Button\n            className=\"controlButton\"\n            label=\"Reset\"\n            onClick={() => this.reset()}\n          />\n        </div>\n        <div className=\"infoContainer\">\n          <table>\n            <tr>\n              <td>Rule:</td>\n              <td>{this.state.rule}</td>\n            </tr>\n            <tr>\n              <td>Gens:</td>\n              <td>{this.state.iteration}</td>\n            </tr>\n            <tr>\n              <td>Index:</td>\n              <td>{this.state.viewIter}</td>\n            </tr>\n          </table>\n        </div>\n      </div>\n    );\n  }\n}\n\nclass Grid extends React.Component {\n  renderSquares() {\n    const rows = this.props.view.length;\n    const cols = this.props.view[0].length;\n    const viewIter = this.props.viewIter;\n    const iteration = this.props.iteration;\n\n    let gridList = [];\n\n    for (let i=0; i<rows; i++) {\n      let rowList = []\n      let buttonsIndex = Math.min(viewIter-1, rows-1);\n\n      // condition for making a button row\n      if (((viewIter == iteration)) && (i == buttonsIndex)) {\n        // insert a row of buttons\n        for (let j=0; j<cols; j++) {\n          rowList.push(\n            <ButtonSquare\n              key={(i*10 + j).toString()}\n              alive={this.props.view[i][j]}\n              onClick={() => this.props.onClick(j)}\n            />\n          );\n        }\n      } else {\n        // make non-clickable square row\n        for (let j=0; j<cols; j++) {\n          rowList.push(\n            <Square\n              key={(i*10 + j).toString()}\n              alive={this.props.view[i][j]}\n            />\n          );\n        }\n      }\n\n      gridList.push(<div className=\"row\">{rowList}</div>);\n    }\n\n    return (gridList);\n  }\n\n  render() {\n    return (this.renderSquares());\n  }\n}\n\nfunction Square(props) {\n  let color = props.alive? \"#ff5638\": \"white\";\n  return (\n    <div \n      className=\"square\"\n      style={{\n        \"background-color\": color, \n        \"box-sizing\": \"border-box\"\n      }}\n    >\n    </div>\n  );\n}\n\nclass ButtonSquare extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <button\n        className=\"buttonSquare\"\n        style={{\"background-color\": this.props.alive? \"#ff5638\": \"#e0e0e0\"}}\n        onClick={this.props.onClick}\n      >\n      </button>\n    );\n  }\n}\n\n\nfunction Button(props) {\n  return (\n    <button className={props.className} onClick={props.onClick}>\n      {props.label}\n    </button>\n  );\n}\n\nclass RuleForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {value: \"126\"};\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({value: event.target.value});\n  }\n\n  handleSubmit(event) {\n    // pass this.state.value into a function passed as a prop that updates ECA state\n    this.props.onSubmit(this.state.value);\n    event.preventDefault();\n  }\n\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <label>\n          Rule=  \n          <input type=\"text\" value={this.state.value} style={{width: \"40px\"}} onChange={this.handleChange} />\n        </label>\n          <input type=\"submit\" value=\"submit\" />\n      </form>\n    );\n  }\n}\n\n\n\n\nReactDOM.render(\n  <ECA />,\n  document.getElementById('root')\n);\n\t\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"sourceRoot":""}